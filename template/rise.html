<!DOCTYPE HTML>
<html lang="zh_cn">
    <head>
        <meta content="width=device-width,initial-scale=1,user-scalable=no,minimal-ui" name="viewport"/>
        <meta charset="utf-8"/>
        <meta content="true" name="x5-fullscreen">
            <meta content="yes" name="full-screen">
                <title>
                    分类涨幅榜
                </title>
                <link href="../lib/light7/css/light7.min.css" rel="stylesheet"/>
                <link href="../lib/fontAw/css/font-awesome.min.css" rel="stylesheet"/>
                <link href="../dist/css/all.css" rel="stylesheet"/>
            </meta>
        </meta>
    </head>
    <body>
        <div class="page">
            <!-- 头部菜单 start -->
            <header class="bar bar-nav">
                <div class="button button-link button-nav pull-left city-block">
                    <i class="fa fa-map-marker fa-lg">
                    </i>
                    <input class="open-panel" data-panel="#panel-left" id="privice" readonly="" type="button" value="深圳"/>
                </div>
                <h1 class="title">
                    <div class="calendar-header">
                        <i class="fa fa-calendar">
                        </i>
                        <input class="date-input" id="my-input" type="button"/>
                    </div>
                </h1>
            </header>
            <!-- 头部菜单 end -->
            <!-- 二级菜单 start -->
            <div class="bar bar-header-secondary">
                <div class="optional-header row no-gutter table-row-header no-edit">
                    <div class="col-5-tym no-add">
                        一级分类
                    </div>
                    <div class="col-4-scgm">
                        市场规模
                    </div>
                    <div class="col-4-scfe">
                        市场份额
                    </div>
                    <div class="col-4-zdf">
                        涨跌幅
                        <i class="fa fa-sort">
                        </i>
                    </div>
                    <div class="col-4-ev">
                        EV
                    </div>
                </div>
            </div>
            <!-- 二级菜单 end -->
            <div class="content has-secondary-bar infinite-scroll" data-distance="100">
                <div class="center">
                    <div class="list-block item-pean-horizontal">
                        <ul class="table-row" id="businessSalesInfo">
                        </ul>
                    </div>
                    <!-- 下拉无限滚动 -->
                    <div class="infinite-scroll-preloader">
                        <div class="preloader">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 省份列表 -->
        <div class="panel-overlay">
        </div>
        <!-- Left Panel with Reveal effect -->
        <div class="panel panel-left panel-reveal theme-dark" id="panel-left">
        </div>
        <!-- <script src="dist/js/jquery.min.js"></script> -->
        <script src="../src/js/jweixin-1.0.0.js" type="text/javascript">
        </script>
        <script src="http://www.light7.cn/assets/js/zepto.js">
        </script>
        <script src="../lib/light7/js/light7.min.js">
        </script>
        <script charset="utf-8" src="../lib/light7/js/light7-city-picker.min.js" type="text/javascript">
        </script>
        <script src="../src/js/data.api.js" type="text/javascript">
        </script>
        <script src="../src/js/all.js">
        </script>
        <script type="text/javascript">
            var loading = false;
     $.attachInfiniteScroll('.infinite-scroll');
     dataApi.getRiseData(function(totalNum){
        if($('#businessSalesInfo li').length >= totalNum){
          console.log(totalNum);
          $.detachInfiniteScroll($('.infinite-scroll'));
          $('.infinite-scroll-preloader').remove();
        }
      });
     $(document).on('infinite', '.infinite-scroll',function() {
        if (loading) return;
        loading = true;
        dataApi.getRiseData(function(totalNum,pn){
          loading = false;
          if($('#businessSalesInfo li').length >= totalNum){
            $.detachInfiniteScroll($('.infinite-scroll'));
            $('.infinite-scroll-preloader').remove();
          }else{
            pn ++;
          }

        });
     });
        </script>
    </body>
</html>
